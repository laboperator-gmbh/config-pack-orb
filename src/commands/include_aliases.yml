description: >
  This command enables usage of aliases across yaml files using
  a custom tag syntax.

  Define aliases you want to use in different files in an `aliases.yml`
  at the root of your source directory. The file should contain a map
  where each key is an alias. In any other file then use the `!alias`
  tag with a key to pull in the value.

  The aliases files is then no longer included in the packed config.

  ```
  # aliases.yml
  my_param:
    type: string
    default: "awesome"

  # jobs/my-job.yml
  my_param: !alias my_param
  ```

parameters:
  src_path:
    type: string
    default: './.circleci/src'
    description: 'Path to the config source folder.'
  alias_file:
    type: string
    default: 'aliases.yml'
    description: 'Aliases file name.'

steps:
  - run:
      name: Include aliases
      environment:
        SRC_PATH: << parameters.src_path >>
        ALIAS_FILE: << parameters.alias_file >>
      command: <<include(scripts/include_aliases.sh)>>
